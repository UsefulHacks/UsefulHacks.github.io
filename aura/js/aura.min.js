function openNav(){document.getElementById("mySidenav").style.width="94px"}function closeNav(){document.getElementById("mySidenav").style.width="0"}function toggleVideoSelect(){const e=document.getElementById("videoSelect");"block"==e.style.display?e.style.display="none":e.style.display="block"}window.addEventListener("load",e=>{document.getElementById("sidenavOpenBtn").addEventListener("click",openNav),document.getElementById("sidenavCloseBtn").addEventListener("click",closeNav),document.getElementById("videoSelectBtn").addEventListener("click",toggleVideoSelect)});let mediaElement,audioInputSelect,audioOutputSelect,videoSelect,selectors;function gotDevices(t){const n=selectors.map(e=>e.value);selectors.forEach(e=>{for(;e.firstChild;)e.removeChild(e.firstChild)});for(let e=0;e!==t.length;++e){var o=t[e];const i=document.createElement("option");i.value=o.deviceId,audioInputSelect&&"audioinput"===o.kind?(i.text=o.label||`microphone ${audioInputSelect.length+1}`,audioInputSelect.appendChild(i)):audioOutputSelect&&"audiooutput"===o.kind?(i.text=o.label||`speaker ${audioOutputSelect.length+1}`,audioOutputSelect.appendChild(i)):videoSelect&&"videoinput"===o.kind&&(i.text=o.label||`camera ${videoSelect.length+1}`,videoSelect.appendChild(i))}selectors.forEach((e,t)=>{Array.prototype.slice.call(e.childNodes).some(e=>e.value===n[t])&&(e.value=n[t])})}function attachSinkId(e,t){void 0!==e.sinkId?e.setSinkId(t).then(()=>{console.log(`Success, audio output device attached: ${t}`)}).catch(e=>{let t=e;"SecurityError"===e.name&&(t=`You need to use HTTPS for selecting audio output device: ${e}`),console.error(t),audioOutputSelect.selectedIndex=0}):console.warn("Browser does not support output device selection.")}function changeAudioDestination(){var e=audioOutputSelect.value;attachSinkId(mediaElement,e)}function gotStream(e){return mediaElement.srcObject=e,navigator.mediaDevices.enumerateDevices()}function handleError(e){console.log("navigator.MediaDevices error: ",e.message,e.name)}function mediaDevicesAllTracksStopped(){const e=mediaElement.srcObject;let t=!0;if(e){console.log("mediaDevicesStop()");const n=e.getTracks();n.forEach(e=>{"ended"!==e.readyState&&(t=!1)})}return t}function mediaDevicesStop(){const e=mediaElement.srcObject;if(e){console.log("mediaDevicesStop()");const t=e.getTracks();t.forEach(e=>e.stop())}else console.warn("mediaDevicesStop(): no tracks to stop")}function mediaDevicesStart(){console.log("mediaDevicesStart()"),mediaDevicesStop();var e=audioInputSelect?audioInputSelect.value:null,t=videoSelect?videoSelect.value:null;return navigator.mediaDevices.getUserMedia({audio:{deviceId:e?{exact:e}:void 0},video:{facingMode:"environment",deviceId:t?{exact:t}:void 0}}).then(gotStream).then(gotDevices)}const mediaDevicesInit=async e=>{console.log("mediaDevicesInit()"),"undefined"==mediaElement&&await navigator.mediaDevices.getUserMedia({audio:!!e.audioInputSelect||!!e.audioOutputSelect,video:!!e.videoSelect}),mediaElement=e.mediaElement,audioInputSelect=e.audioInputSelect,audioOutputSelect=e.audioOutputSelect,videoSelect=e.videoSelect,selectors=[],[audioInputSelect,audioOutputSelect,videoSelect].forEach(e=>{e&&selectors.push(e)}),audioInputSelect&&(audioInputSelect.onchange=mediaDevicesStart),audioOutputSelect&&(audioOutputSelect.disabled=!("sinkId"in HTMLMediaElement.prototype)),audioOutputSelect&&(audioOutputSelect.onchange=changeAudioDestination),videoSelect&&(videoSelect.onchange=mediaDevicesStart),await navigator.mediaDevices.enumerateDevices().then(gotDevices).then(mediaDevicesStart).catch(handleError)};mediaDevicesInit({mediaElement:document.querySelector("video"),audioInputSelect:null,audioOutputSelect:null,videoSelect:document.querySelector("select#videoSelect")});const msToSmpteString=(e,t=30)=>{var n=e/36e5,o=Math.floor(n),i=60*(n-o),e=Math.floor(i),n=60*(i-e),i=Math.floor(n),t=Math.floor((n-i)*t);return`${o<10?"0":""}${o}:${e<10?"0":""}${e}:${n<10?"0":""}${i};${t<10?"0":""}${t}`},msToSmpteStringhhmmss=(e,t=0)=>{var n=e/36e5,o=Math.floor(n),e=60*(n-o),n=Math.floor(e),e=60*(e-n);return`${o<10?"0":""}${o}:${n<10?"0":""}${n}:${e<10?"0":""}${Math.floor(e)}`},triangles=[{x1:330,y1:140,x2:300,y2:140,x3:285,y3:125},{x1:240,y1:100,x2:240,y2:60,x3:250,y3:90},{x1:280,y1:110,x2:330,y2:140,x3:285,y3:125},{x1:330,y1:140,x2:290,y2:150,x3:300,y3:140},{x1:280,y1:90,x2:320,y2:80,x3:325,y3:90},{x1:280,y1:80,x2:280,y2:50,x3:320,y3:80},{x1:280,y1:90,x2:280,y2:80,x3:320,y3:80},{x1:280,y1:90,x2:325,y2:90,x3:330,y3:110},{x1:230,y1:190,x2:240,y2:170,x3:280,y3:170},{x1:240,y1:60,x2:210,y2:90,x3:240,y3:100},{x1:240,y1:60,x2:210,y2:90,x3:200,y3:70},{x1:280,y1:90,x2:330,y2:110,x3:330,y3:140},{x1:280,y1:90,x2:330,y2:110,x3:320,y3:80},{x1:280,y1:90,x2:330,y2:140,x3:280,y3:110},{x1:330,y1:140,x2:280,y2:110,x3:290,y3:150},{x1:280,y1:110,x2:280,y2:90,x3:250,y3:90},{x1:250,y1:90,x2:280,y2:110,x3:280,y3:90},{x1:290,y1:150,x2:330,y2:140,x3:280,y3:110},{x1:290,y1:150,x2:330,y2:140,x3:320,y3:170},{x1:290,y1:150,x2:320,y2:170,x3:280,y3:170},{x1:290,y1:150,x2:280,y2:170,x3:250,y3:170},{x1:280,y1:170,x2:320,y2:170,x3:270,y3:200},{x1:270,y1:200,x2:280,y2:170,x3:250,y3:200},{x1:250,y1:200,x2:280,y2:170,x3:270,y3:200},{x1:250,y1:200,x2:280,y2:170,x3:230,y3:190},{x1:230,y1:190,x2:280,y2:170,x3:250,y3:200},{x1:230,y1:190,x2:280,y2:170,x3:250,y3:170},{x1:230,y1:190,x2:250,y2:200,x3:210,y3:210},{x1:210,y1:210,x2:250,y2:200,x3:230,y3:190},{x1:210,y1:210,x2:230,y2:190,x3:190,y3:180},{x1:190,y1:180,x2:230,y2:190,x3:210,y3:210},{x1:190,y1:180,x2:230,y2:190,x3:250,y3:170},{x1:190,y1:180,x2:210,y2:210,x3:160,y3:170},{x1:250,y1:170,x2:280,y2:170,x3:290,y3:150},{x1:200,y1:70,x2:210,y2:90,x3:150,y3:70},{x1:200,y1:70,x2:210,y2:90,x3:240,y3:60},{x1:150,y1:70,x2:200,y2:70,x3:210,y3:90},{x2:200,y2:70,x3:220,y3:50,x1:240,y1:60},{x1:240,y1:100,x2:250,y2:90,x3:240,y3:60},{x1:240,y1:60,x2:240,y2:100,x3:210,y3:90},{x1:240,y1:60,x2:240,y2:100,x3:250,y3:90},{x1:240,y1:60,x2:240,y2:100,x3:210,y3:90},{x1:210,y1:90,x2:180,y2:100,x3:150,y3:70},{x1:240,y1:60,x2:200,y2:70,x3:210,y3:90},{x1:240,y1:60,x2:200,y2:70,x3:210,y3:90},{x1:210,y1:90,x2:240,y2:60,x3:240,y3:100},{x1:210,y1:90,x2:240,y2:100,x3:240,y3:60},{x1:250,y1:90,x2:240,y2:60,x3:280,y3:50},{x1:250,y1:90,x2:240,y2:60,x3:280,y3:50},{x1:280,y1:90,x2:320,y2:80,x3:280,y3:50},{x1:280,y1:50,x2:280,y2:90,x3:250,y3:90},{x1:280,y1:50,x2:280,y2:90,x3:250,y3:90},{x1:250,y1:90,x2:280,y2:50,x3:280,y3:90},{x1:280,y1:50,x2:240,y2:60,x3:250,y3:90},{x1:250,y1:90,x2:280,y2:90,x3:280,y3:50}],makeSmudge=e=>{const t=document.createElement("canvas"),n=t.getContext("2d");t.width=64,t.height=64;const o=n.createRadialGradient(48,32,0,32,32,32);o.addColorStop(0,"rgb(120, 120, 120)"),o.addColorStop(1,"rgb(0, 0, 0)"),n.fillStyle=o,n.fillRect(0,0,64,64);var i=new THREE.CanvasTexture(t);const l=new THREE.Mesh(new THREE.CircleGeometry(20,32,32),new THREE.MeshBasicMaterial({color:15658734,alphaMap:i,transparent:!0,opacity:.5}));return e.add(l),l.position.x=.14,l.position.z=-.01,l};let glHueOffset=0,glMaterial=null,glRenderId=null;function main(e=null){var t=document.querySelector("#webGLCanvas");const l=new THREE.WebGLRenderer({canvas:t,alpha:!0});const a=new THREE.PerspectiveCamera(75,2,.1,100);a.position.z=20,a.position.y=0,a.position.x=-3;const c=new THREE.Scene;c.background=null;{const T=new THREE.DirectionalLight(16777215,1);T.position.set(-1,2,4),c.add(T)}const n=[];const o=[];const i=[];var s=function(t,n){let o=[],i=1e6,l=-1e6,a=1e6,c=-1e6;var s=t.length;for(let e=0;e<s;e++){var r=t[e];r.x1>l&&(l=r.x1),r.x2>l&&(l=r.x2),r.x3>l&&(l=r.x3),r.y1>c&&(c=r.y1),r.y2>c&&(c=r.y2),r.y3>c&&(c=r.y3),r.x1<i&&(i=r.x1),r.x2<i&&(i=r.x2),r.x3<i&&(i=r.x3),r.y1<a&&(a=r.y1),r.y2<a&&(a=r.y2),r.y3<a&&(a=r.y3)}var d=(e,t,n)=>(e-.5*(t+n))/(.5*(n-t));for(let e=0;e<s;e++){var u=t[e];o.push(d(u.x1,i,l)*n*2*.5,d(u.y1,a,c)*n,0,d(u.x2,i,l)*n*2*.5,d(u.y2,a,c)*n,0,d(u.x3,i,l)*n*2*.5,d(u.y3,a,c)*n,0)}return o}(triangles,20);let r=0;for(let e=0;e<s.length;e+=3)n.push(s[e],s[e+1],s[e+2]),o.push(0!=e&&!(e%6),0!=e&&!(e%3)||!(e%6)),i.push(r),r++;const d=new THREE.BufferGeometry;d.setAttribute("position",new THREE.BufferAttribute(new Float32Array(n),3)),d.setAttribute("normal",new THREE.BufferAttribute(new Float32Array([]),3)),d.setAttribute("uv",new THREE.BufferAttribute(new Float32Array(o),2)),d.setIndex(i);var u;glMaterial=(u=e,new THREE.ShaderMaterial({uniforms:{hsvOffset:{value:new THREE.Vector3(0,0,0)},texture:{value:u},uvOffset:{value:new THREE.Vector2(0,0)},color1:{value:new THREE.Color("red")},color2:{value:new THREE.Color("green")}},vertexShader:`
        varying vec2 vUv;
    
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);
        }
      `,fragmentShader:`
      uniform vec3 hsvOffset;
      varying vec2 vUv;
        vec3 hue2rgb(float h) {
          vec3 c = vec3(h, 0.0, 0.0);
          float k = 0.1; 
          return smoothstep(0. + k, 1. - k,1. * (
                            .5 + .5 * cos((vec3(c.x) + vec3(1., 2./3., 1./3.)) * radians(360.))));
      }
      void main() {
        gl_FragColor = vec4(hue2rgb(fract(vUv.x + vUv.y + hsvOffset[0])), 0.80);
      }
      `}));const y=function(e,t,n){const o=new THREE.Mesh(e,glMaterial);return c.add(o),o.position.x=t,o.position.y=n,o}(d,0,0),x=makeSmudge(c);let m,v=.1;const p=.5,g=.9999,f=1e3,S=5e-4,h=3.5;let E=0;function w(e){E++,void 0===m&&(m=e),glHueOffset+=v,1<glHueOffset&&(glHueOffset=1-glHueOffset),glMaterial.uniforms.hsvOffset.value=[glHueOffset,0,0];var t,n,o,i=Math.pow(E*S,3);i>h&&(E=0,x.material.opacity=p),y.scale.x=y.scale.y=i,x.scale.x=x.scale.y=i,E>f&&(x.material.opacity*=g),t=l,n=t.domElement,o=n.clientWidth,e=n.clientHeight,(n=n.width!==o||n.height!==e)&&t.setSize(o,e,!1),n&&(n=l.domElement,a.aspect=n.clientWidth/n.clientHeight,a.updateProjectionMatrix()),E%30||(document.getElementById("timecodeDiv").textContent=msToSmpteStringhhmmss(i/h*30*6e4)),l.render(c,a),glRenderId=requestAnimationFrame(w)}const I=()=>{const e=document.getElementById("pauseBtn");glRenderId=null!=glRenderId?(cancelAnimationFrame(glRenderId),e.innerHTML='<i class="fas fa-play"></i>',null):(e.innerHTML='<i class="fas fa-pause"></i>',requestAnimationFrame(w))},k=document.getElementById("pauseBtn");k.addEventListener("click",e=>{I(),e.preventDefault()}),window.addEventListener("keyup",e=>{var t;e.defaultPrevented||(" "!==(t=e.key||e.keyCode)&&32!=t||(e.preventDefault(),I()))});window.onresize=()=>{l.setSize(window.innerWidth,window.innerHeight),a.aspect=window.innerWidth/window.innerHeight,a.updateProjectionMatrix()},glRenderId=requestAnimationFrame(w)}const toggleVideo=()=>{const e=document.getElementById("videoMuteBtn");mediaDevicesAllTracksStopped()?(mediaDevicesStart(),e.innerHTML='<i class="fas fa-eye-slash"></i>'):(mediaDevicesStop(),e.innerHTML='<i class="fas fa-eye"></i>')},eyesBtn=document.getElementById("videoMuteBtn");eyesBtn.addEventListener("click",toggleVideo);async function openFullscreen(){const e=document.documentElement;return e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():void 0}async function closeFullscreen(){return document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen?document.msExitFullscreen():void 0}const toggleFullScreen=()=>{const e=document.getElementById("fullscreenBtn");document.fullscreenElement||document.webkitCurrentFullScreenElement||document.mozFullScreenElement?(console.log("Exiting full-screen mode"),closeFullscreen().then(()=>{e.innerHTML='<i class="fas fa-expand"></i>'}).catch(e=>{console.log(`Error attempting to exit full-screen mode: ${e.message} (${e.name})`)})):openFullscreen().then(()=>{e.innerHTML='<i class="fas fa-compress"></i>'}).catch(e=>{console.log(`Error attempting to enable full-screen mode: ${e.message} (${e.name})`)})},fullscreenBtn=document.getElementById("fullscreenBtn");fullscreenBtn.addEventListener("click",toggleFullScreen),main();export{openNav,mediaDevicesAllTracksStopped,mediaDevicesStop,mediaDevicesStart,msToSmpteString,msToSmpteStringhhmmss,triangles,makeSmudge};